TODO: support transactions in API